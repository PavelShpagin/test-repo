<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#0a0a1a">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="description" content="Play the classic Pac-Man arcade game with modern graphics and smooth gameplay. Optimized for mobile and desktop.">
  <meta name="keywords" content="pac-man, pacman, arcade, game, retro, classic">
  <meta name="author" content="Pac-Man JS">
  
  <!-- Open Graph / Social Media -->
  <meta property="og:title" content="Pac-Man | Classic Arcade Game">
  <meta property="og:description" content="Play the classic Pac-Man arcade game with modern graphics">
  <meta property="og:type" content="website">
  
  <!-- Performance -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="format-detection" content="telephone=no">
  
  <title>PAC-MAN | Classic Arcade Game</title>
  
  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' fill='%23FFD700'/><path d='M50 50 L90 30 A40 40 0 0 1 90 70 Z' fill='%230a0a1a'/></svg>">
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json">
  
  <!-- iOS specific -->
  <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><circle cx='256' cy='256' r='200' fill='%23FFD700'/><path d='M256 256 L456 156 A200 200 0 0 1 456 356 Z' fill='%230a0a1a'/></svg>">
  
  <!-- Styles -->
  <link rel="stylesheet" href="./styles.css">
  
  <!-- Preconnect to Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
  <!-- HUD -->
  <div id="hud">
    <div class="brand">PAC-MAN</div>
    <div class="stats">
      <span id="score" title="Score">000000</span>
      <span id="lives" title="Lives">🟡🟡🟡</span>
      <span id="level" title="Level">1</span>
    </div>
  </div>

  <!-- Game Canvas -->
  <canvas id="game" tabindex="0" aria-label="Pac-Man game board"></canvas>

  <!-- Start Screen Overlay -->
  <div id="overlay" class="overlay show">
    <div class="panel">
      <h1>PAC-MAN</h1>
      <p id="gameMessage"></p>
      <p>🟡 Collect all dots to complete the level!</p>
      <p>👻 Eat power pellets to chase ghosts!</p>
      <p>🍒 Grab bonus fruits for extra points!</p>
      <p>🎮 Use arrow keys, WASD, or touch controls</p>
      <p id="highScoreDisplay">🏆 High Score: <span id="highScoreValue">0</span></p>
      <button id="startBtn" aria-label="Start Game">START GAME</button>
    </div>
  </div>

  <!-- Mobile Controls -->
  <div id="controls" class="controls">
    <div class="dpad">
      <button id="btnUp" aria-label="Move Up">▲</button>
      <div class="middle">
        <button id="btnLeft" aria-label="Move Left">◀</button>
        <button id="btnRight" aria-label="Move Right">▶</button>
      </div>
      <button id="btnDown" aria-label="Move Down">▼</button>
    </div>
  </div>

  <!-- Game Script -->
  <script src="./game.js"></script>
  
  <!-- PWA Support -->
  <script>
    // Register service worker for offline play (optional)
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js').catch(() => {});
      });
    }
    
    // Prevent pull-to-refresh on mobile
    document.addEventListener('touchmove', (e) => {
      if (e.touches.length > 1) return;
      e.preventDefault();
    }, { passive: false });
    
    // Handle orientation changes
    window.addEventListener('orientationchange', () => {
      setTimeout(() => {
        window.scrollTo(0, 0);
      }, 100);
    });
    
    // Ensure canvas gets focus
    window.addEventListener('load', () => {
      document.getElementById('game').focus();
    });
  </script>
</body>
</html>